{% extends "base.html" %}
{% import 'include_html/macros.html' as macros %}

{% block body %}
<!-- Button trigger modal -->
<button type="button " class="btn btn-primary" data-toggle="modal" data-target="#addEvent">
  Add Event
</button>

<!-- Modal -->
<div class="modal fade" id="addEvent" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">New Event</h4>
      </div>
      <div class="modal-body">

          {{ macros.gen_group(event_form.name) }}
          {{ macros.gen_group(event_form.date) }}
          {{ macros.gen_group(event_form.description) }}

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
<h2>Future events</h2>
<br>
{% for event in events %}
    <h4><a href="/events/by-id/{{ event.id }}">{{ event.name }}</a> - <small>{{ event.date_time.date() }} @ {{ event.date_time.strftime("%I:%M %p") }}</small></h4>

    <div class="row" style="padding-left: 1cm">
        {% if get_count(event.todos) %}
        <div class="col-md-5 col-sm-6 col-xs-12">
            <div class="table-responsive">
                {{ macros.todo_list(event.todos, current_user) }}
            </div>
        </div>
        {% else %}
            No Tasks<br>
            <br>
        {% endif %}
    </div>
{% else %}
        No events
{% endfor %}
{% endblock %}

{% block extrajs %}
<script src="/static/js/todo.js"></script>
{% endblock %}